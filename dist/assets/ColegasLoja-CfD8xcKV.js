import{b as i,f as s,t as n,F as u,h as g,n as p,g as m,i as _,k as f,l}from"./vendor-B3fty_EA.js";import{_ as v,a as h,b as C}from"./index-16tKPmdB.js";import"./utils-DowPLjG-.js";import"./charts-CUJbImKC.js";const b={name:"ColegasLoja",props:{loja:{type:String,required:!0},usuarioAtualId:{type:String,required:!0}},setup(){const a=f(),o=C();return{router:a,nivelStore:o}},data(){return{colegas:[],carregando:!0}},async mounted(){await this.carregarColegas()},methods:{async carregarColegas(){try{this.carregando=!0;const a=JSON.parse(localStorage.getItem("lojaSelecionada")||'{"codigo":"056"}'),r=(await h.get("/metricas/usuarios",{headers:{"x-loja":a.codigo}})).data,d=r.usuarios||r||[];this.colegas=d.map(t=>({id:t.id,nome:t.nome,foto:t.foto||this.getFotoUrl({nome:t.nome}),contador:t.contador||0,xpTotal:t.conquistas?.xpTotal||0,nivel:t.conquistas?.nivel||1,titulo:t.conquistas?.titulo||"Novato",posicao:t.desempenho?.posicaoLoja||0,totalConquistas:t.conquistas?.totalConquistas||0})).sort((t,c)=>c.xpTotal-t.xpTotal)}catch(a){console.error("Erro ao carregar colegas:",a)}finally{this.carregando=!1}},getFotoUrl(a){return a.foto?a.foto:`https://api.dicebear.com/7.x/initials/svg?seed=${a.nome?encodeURIComponent(a.nome.toLowerCase()):"default"}&backgroundColor=b6e3f4,c0aede&radius=50&size=128`},verPerfil(a){a!==this.usuarioAtualId&&this.router.push(`/perfil/${a}`)}}},k={class:"colegas-loja-container"},y={class:"section-header"},x={class:"header-content"},j={class:"total-badge"},q={key:0,class:"loading-state"},S={key:1,class:"empty-state"},N={key:2,class:"colegas-grid"},I=["onClick"],T={class:"colega-avatar-container"},w=["src","alt"],L={key:0,class:"badge-voce"},A={class:"nivel-badge"},F={class:"colega-info"},V={class:"colega-nome"},B={class:"colega-titulo"},P={class:"colega-stats"},R={class:"stat-mini"},U={class:"stat-mini"},z={class:"stat-mini ranking-stat"};function E(a,o,r,d,t,c){return l(),i("div",k,[s("div",y,[s("div",x,[o[0]||(o[0]=s("i",{class:"fas fa-users"},null,-1)),s("h2",null,"Colegas da "+n(r.loja),1)]),s("span",j,n(t.colegas.length)+" colaboradores",1)]),t.carregando?(l(),i("div",q,[...o[1]||(o[1]=[s("div",{class:"spinner"},null,-1),s("p",null,"Carregando colegas...",-1)])])):t.colegas.length===0?(l(),i("div",S,[...o[2]||(o[2]=[s("i",{class:"fas fa-user-friends"},null,-1),s("p",null,"Nenhum colega encontrado nesta loja.",-1)])])):(l(),i("div",N,[(l(!0),i(u,null,g(t.colegas,e=>(l(),i("div",{key:e.id,class:p(["colega-card",{"is-current":e.id===r.usuarioAtualId}]),onClick:D=>c.verPerfil(e.id)},[s("div",T,[s("img",{src:e.foto,alt:e.nome,class:"colega-avatar"},null,8,w),e.id===r.usuarioAtualId?(l(),i("div",L,"Você")):m("",!0),s("div",A,[o[3]||(o[3]=s("span",{class:"nivel-icon"},"⭐",-1)),_(" "+n(e.nivel),1)])]),s("div",F,[s("h3",V,n(e.nome),1),s("p",B,n(e.titulo),1),s("div",P,[s("div",R,[o[4]||(o[4]=s("i",{class:"fas fa-star"},null,-1)),s("span",null,n(e.xpTotal)+" XP",1)]),s("div",U,[o[5]||(o[5]=s("i",{class:"fas fa-check-circle"},null,-1)),s("span",null,n(e.contador),1)]),s("div",z,[o[6]||(o[6]=s("i",{class:"fas fa-award"},null,-1)),s("span",null,n(e.totalConquistas),1)])])])],10,I))),128))]))])}const H=v(b,[["render",E],["__scopeId","data-v-8bbbcb72"]]);export{H as default};
